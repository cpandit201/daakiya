<!-- http://localhost:7000/db_tracking_history.html?trackingId=HERE-48c6c18d-af95-4da8-921f-d978c7e76d51 -->
<!--http://localhost:63342/daakiya/db_tracking_history.html?trackingId=HERE-970436b8-ab88-4c86-864e-70bdf7faa98c&_ijt=ap7kvj9t6f800fa9h5okchbb26-->
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
  <title>Daakiya - Route Optimization and Delivery Management</title>

  <!-- Bootstrap -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css"
        integrity="sha384-HSMxcRTRxnN+Bdg0JdbxYKrThecOKuH5zCYotlSAcp1+c8xmyTe9GYg1l9a69psu" crossorigin="anonymous">
  <link href="./css/bootstrap-theme.min.css" rel="stylesheet"/>
  <link href="css/theme.css" rel="stylesheet"/>

  <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>


  <![endif]-->
  <link rel="icon" href="./img/favicon-d.png">

  <script src="./accessKeys.js"></script>
  <script>
  </script>
</head>
<html>

<body>
<!-- Fixed navbar -->
<nav class="navbar navbar-inverse navbar-fixed-top">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar"
              aria-expanded="false" aria-controls="navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="#">Daakiya</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li><a href="./order_list_view.html">Orders</a></li>
        <li><a href="./delivery_associates_list_view.html">Fleet</a></li>
        <li><a href="./routes_list_view.html">Routes</a></li>


        <!--        <li class="dropdown">-->
        <!--          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Dropdown <span class="caret"></span></a>-->
        <!--          <ul class="dropdown-menu">-->
        <!--            <li><a href="#">Action</a></li>-->
        <!--            <li><a href="#">Another action</a></li>-->
        <!--            <li><a href="#">Something else here</a></li>-->
        <!--            <li role="separator" class="divider"></li>-->
        <!--            <li class="dropdown-header">Nav header</li>-->
        <!--            <li><a href="#">Separated link</a></li>-->
        <!--            <li><a href="#">One more separated link</a></li>-->
        <!--          </ul>-->
        <!--        </li>-->
      </ul>
    </div><!--/.nav-collapse -->
  </div>
</nav>

<style type="text/css">
  .body {
    font-family: 'Raleway', sans-serif;
  }
  .thumbnail {
    padding: 4px;
    line-height: 1.42857143;
    background-color: #fff;
    border: 1px solid #ddd;
    border-radius: 4px;
    -webkit-transition: all .2s ease-in-out;
    -o-transition: all .2s ease-in-out;
    transition: all .2s ease-in-out;
    display: inline-block;
    max-width: 100%;
    height: auto;
    box-shadow: 0 1px 2px rgba(0, 0, 0, .075);
  }

  .header {
    margin-top: -19px;
    margin-bottom: 29px;
    background: linear-gradient(45deg, #083100 0%, #336d61 100%);
    box-shadow: 0px 8px 31px 0px #0e0b0b96 inset;
    padding-top: 28px;
    padding-bottom: 27px;
    color: #ececec;
    text-shadow: 1px 1px 1px #000;
    background: linear-gradient(45deg, #0e1d0c 0%, #335a6d 100%);
  }

  .header .dropdown-menu {
    text-shadow: 0px 0px 0px #000;
    /*display:table;*/
  }




  .dropdown-menu {
    top: 27px;
    left: 0px;
    /*display: table;*/
    width: 556px;
  }

</style>

<div class="">

  <div class="header">
    <div class="container">
      <div class="">
        <div class="row">
          <div class="col-xs-12 col-md-12 col-lg-12">
            <h1>Route Details</h1>
            <!--            <h3>Delivery Associate : Frank Williams - 46458</h3>-->
            <!--            <p><strong>Last Tracking received on: </strong><span>10 Jun 2019, 12:30am</span></p>-->
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="container">

    <div class="row">

      <style type="text/css">
        .timeline {
          list-style: none;
          padding: 20px 0 20px;
          position: relative;
        }

        .timeline:before {
          top: 0;
          bottom: 0;
          position: absolute;
          content: " ";
          width: 3px;
          background-color: #eeeeee;
          left: 50%;
          margin-left: -1.5px;
        }

        .timeline > li {
          margin-bottom: 20px;
          position: relative;
        }

        .timeline > li:before,
        .timeline > li:after {
          content: " ";
          display: table;
        }

        .timeline > li:after {
          clear: both;
        }

        .timeline > li:before,
        .timeline > li:after {
          content: " ";
          display: table;
        }

        .timeline > li:after {
          clear: both;
        }

        .timeline > li > .timeline-panel {
          width: 46%;
          float: left;
          border: 1px solid #d4d4d4;
          border-radius: 2px;
          padding: 20px;
          position: relative;
          -webkit-box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
          box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
        }

        .timeline > li > .timeline-panel:before {
          position: absolute;
          top: 26px;
          right: -15px;
          display: inline-block;
          border-top: 15px solid transparent;
          border-left: 15px solid #ccc;
          border-right: 0 solid #ccc;
          border-bottom: 15px solid transparent;
          content: " ";
        }

        .timeline > li > .timeline-panel:after {
          position: absolute;
          top: 27px;
          right: -14px;
          display: inline-block;
          border-top: 14px solid transparent;
          border-left: 14px solid #fff;
          border-right: 0 solid #fff;
          border-bottom: 14px solid transparent;
          content: " ";
        }

        .timeline > li > .timeline-badge {
          color: #fff;
          width: 50px;
          height: 50px;
          line-height: 50px;
          font-size: 1.4em;
          text-align: center;
          position: absolute;
          top: 16px;
          left: 50%;
          margin-left: -25px;
          background-color: #999999;
          z-index: 100;
          border-top-right-radius: 50%;
          border-top-left-radius: 50%;
          border-bottom-right-radius: 50%;
          border-bottom-left-radius: 50%;
        }

        .timeline > li.timeline-inverted > .timeline-panel {
          float: right;
        }

        .timeline > li.timeline-inverted > .timeline-panel:before {
          border-left-width: 0;
          border-right-width: 15px;
          left: -15px;
          right: auto;
        }

        .timeline > li.timeline-inverted > .timeline-panel:after {
          border-left-width: 0;
          border-right-width: 14px;
          left: -14px;
          right: auto;
        }

        .timeline-badge.primary {
          background-color: #2e6da4 !important;
        }

        .timeline-badge.success {
          background-color: #3f903f !important;
        }

        .timeline-badge.warning {
          background-color: #f0ad4e !important;
        }

        .timeline-badge.danger {
          background-color: #d9534f !important;
        }

        .timeline-badge.info {
          background-color: #5bc0de !important;
        }

        .timeline-title {
          margin-top: 0;
          color: inherit;
        }

        .timeline-body > p,
        .timeline-body > ul {
          margin-bottom: 0;
        }

        .timeline-body > p + p {
          margin-top: 5px;
        }

        @media print
        {
          .no-print, .no-print *
          {
            display: none !important;
          }
        }

        @media (max-width: 767px) {
          ul.timeline:before {
            left: 40px;
          }

          ul.timeline > li > .timeline-panel {
            width: calc(100% - 90px);
            width: -moz-calc(100% - 90px);
            width: -webkit-calc(100% - 90px);
          }

          ul.timeline > li > .timeline-badge {
            left: 15px;
            margin-left: 0;
            top: 16px;
          }

          ul.timeline > li > .timeline-panel {
            float: right;
          }

          ul.timeline > li > .timeline-panel:before {
            border-left-width: 0;
            border-right-width: 15px;
            left: -15px;
            right: auto;
          }

          ul.timeline > li > .timeline-panel:after {
            border-left-width: 0;
            border-right-width: 14px;
            left: -14px;
            right: auto;
          }
        }
      </style>


      <div id="screen4">
        <br/>
        <h2 class="text-center">Please wait, Loading your route plan.</h2>
        <img class="col-xs-12 col-md-12 col-lg-12" src="./img/location_loader_transparent.gif" style="
    margin-top: -284px;
    z-index: -30;"/>
      </div>

      <div id="screen5" style="display:none;" class="row">

        <div style="">
          <!--      <h2>Results</h2>-->
          <div id="renderTimeline" style="" class="container">

            <div class="page-header">
              <h2 id="timeline" class="col-xs-12 col-md-12 col-lg-6"><span class="text" id="tripId">TRIP-</span></h2>
              <h2 class="col-xs-12 col-md-12 col-lg-6">Total Distance  - <span class="text-muted" id="tripDistance">- km</span></h2>
              <br><br><br>
            </div>

            <div>
              <ul class="timeline" id="renderTimelineList">
                <!--                <li class="timeline">-->
                <!--                  <div class="timeline-badge danger"><i class="glyphicon glyphicon-map-marker"></i></div>-->
                <!--                  <div class="timeline-panel">-->
                <!--                    <div class="timeline-heading">-->
                <!--                      <h3 class="timeline-title">Order 1561040884628</h3>-->
                <!--                      <p><small class="text-muted"><i class="glyphicon glyphicon-time"></i> ETA : 2019-06-25T05:06</small></p>-->
                <!--                    </div>-->
                <!--                    <div class="timeline-body">-->
                <!--                      <p>-->
                <!--                        <strong>TripStop# :</strong> 0 <br>-->
                <!--                        &lt;!&ndash;  <strong>Customer :</strong> Chirag Pandit&ndash;&gt;-->
                <!--                        <strong>Customer :</strong> Jaidatt <br>-->
                <!--                        <strong>Address :</strong> Nesco It Park Mumbai MH-->
                <!--                        &lt;!&ndash;                  Customer : Chirag Pandit&ndash;&gt;-->
                <!--                      </p><br>-->
                <!--                      <img src="https://image.maps.api.here.com/mia/1.6/mapview?c=19.15571160885641%2C72.85764761047076&amp;z=14&amp;w=250&amp;h=120&amp;f=1&amp;app_id=hVA6vKr6ixW90KYvkb7k&amp;app_code=IulCKZdfTxT9b5NPveT_og" class="no-print col-xs-12 col-md-12 col-lg-12 thumbnail ">-->
                <!--                    </div>-->
                <!--                    <a href="https://share.here.com/r/19.152225899999998,72.8557076/19.15571160885641,72.85764761047076?m=d&amp;t=traffic" target="_blank" class="no-print  col-xs-6 col-md-6 col-lg-1 btn btn-primary" type="button" style="margin: 5px;border-radius: 82px;width: 120px;border: 1px solid #000;">-->
                <!--                      Navigate <span class="glyphicon glyphicon-new-window" style=""></span>-->
                <!--                    </a>-->
                <!--                    &lt;!&ndash;              <a href="./" class="no-print  col-xs-6 col-md-6 col-lg-1 btn btn-default" type="button" style="margin: 5px;border-radius: 82px;width: 120px;border: 1px solid #000;">&ndash;&gt;-->
                <!--                    &lt;!&ndash;                Completed <span class="glyphicon glyphicon-ok-sign" style=""></span>&ndash;&gt;-->
                <!--                    &lt;!&ndash;              </a>&ndash;&gt;-->
                <!--                    &lt;!&ndash;              <a href="./" class="no-print  col-xs-6 col-md-6 col-lg-1 btn btn-danger" type="button" style="margin: 5px;border-radius: 82px;width: 120px;border: 1px solid #000;">&ndash;&gt;-->
                <!--                    &lt;!&ndash;                Cancelled <span class="glyphicon glyphicon-remove-sign" style=""></span>&ndash;&gt;-->
                <!--                    &lt;!&ndash;              </a>&ndash;&gt;-->
                <!--                  </div>-->
                <!--                </li>-->
                <!--                <li class="timeline-inverted">-->
                <!--                  <div class="timeline-badge success"><i class="glyphicon glyphicon-map-marker"></i></div>-->
                <!--                  <div class="timeline-panel">-->
                <!--                    <div class="timeline-heading">-->
                <!--                      <h3 class="timeline-title">Order 1560659419422</h3>-->
                <!--                      <p><small class="text-muted"><i class="glyphicon glyphicon-time"></i> ETA : 2019-06-25T15:30</small></p>-->
                <!--                    </div>-->
                <!--                    <div class="timeline-body">-->
                <!--                      <p>-->
                <!--                        <strong>TripStop# :</strong> 1 <br>-->
                <!--                        &lt;!&ndash;  <strong>Customer :</strong> Chirag Pandit&ndash;&gt;-->
                <!--                        <strong>Customer :</strong> Satish Avhad <br>-->
                <!--                        <strong>Address :</strong> HERE Nesco-Mumbai Nesco International Private RoadMumbai 400063 MH-->
                <!--                        &lt;!&ndash;                  Customer : Chirag Pandit&ndash;&gt;-->
                <!--                      </p><br>-->
                <!--                      <img src="https://image.maps.api.here.com/mia/1.6/mapview?c=19.1524%2C72.85609&amp;z=14&amp;w=250&amp;h=120&amp;f=1&amp;app_id=hVA6vKr6ixW90KYvkb7k&amp;app_code=IulCKZdfTxT9b5NPveT_og" class="no-print col-xs-12 col-md-12 col-lg-12 thumbnail ">-->
                <!--                    </div>-->
                <!--                    <a href="https://share.here.com/r/19.15571160885641,72.85764761047076/19.1524,72.85609?m=d&amp;t=traffic" target="_blank" class="no-print  col-xs-6 col-md-6 col-lg-1 btn btn-primary" type="button" style="margin: 5px;border-radius: 82px;width: 120px;border: 1px solid #000;">-->
                <!--                      Navigate <span class="glyphicon glyphicon-new-window" style=""></span>-->
                <!--                    </a>-->
                <!--                    &lt;!&ndash;              <a href="./" class="no-print  col-xs-6 col-md-6 col-lg-1 btn btn-default" type="button" style="margin: 5px;border-radius: 82px;width: 120px;border: 1px solid #000;">&ndash;&gt;-->
                <!--                    &lt;!&ndash;                Completed <span class="glyphicon glyphicon-ok-sign" style=""></span>&ndash;&gt;-->
                <!--                    &lt;!&ndash;              </a>&ndash;&gt;-->
                <!--                    &lt;!&ndash;              <a href="./" class="no-print  col-xs-6 col-md-6 col-lg-1 btn btn-danger" type="button" style="margin: 5px;border-radius: 82px;width: 120px;border: 1px solid #000;">&ndash;&gt;-->
                <!--                    &lt;!&ndash;                Cancelled <span class="glyphicon glyphicon-remove-sign" style=""></span>&ndash;&gt;-->
                <!--                    &lt;!&ndash;              </a>&ndash;&gt;-->
                <!--                  </div>-->
                <!--                </li>-->
              </ul>
            </div>

            <!--        <ul class="timeline">-->

            <!--          <li>-->
            <!--            <div class="timeline-badge danger"><i class="glyphicon glyphicon-map-marker"></i></div>-->
            <!--            <div class="timeline-panel">-->
            <!--              <div class="timeline-heading">-->
            <!--                <h3 class="timeline-title">Order 1560691395144</h3>-->
            <!--                <p><small class="text-muted"><i class="glyphicon glyphicon-time"></i> ETA : June 28th 2019, 3:30:00 pm</small></p>-->
            <!--              </div>-->
            <!--              <div class="timeline-body">-->
            <!--                <p>-->
            <!--                  <strong>TripStop# :</strong> 1 <br/>-->
            <!--                  &lt;!&ndash;  <strong>Customer :</strong> Chirag Pandit&ndash;&gt;-->
            <!--                  <strong>Customer :</strong> Chirag Pandit <br/>-->
            <!--                  <strong>Address :</strong> B-10/Silver Park, Mira Road East, Thane - 401107-->
            <!--                  &lt;!&ndash;                  Customer : Chirag Pandit&ndash;&gt;-->
            <!--                </p><br/>-->
            <!--                <img src="https://image.maps.api.here.com/mia/1.6/mapview?-->
            <!--                c=19.2814%2C72.87371-->
            <!--                &z=14&w=250&h=120&f=1&-->
            <!--                app_id=st58tn5HdBdzSlMNw5OX-->
            <!--                &app_code=53DQ_ew0UvU1KmWtUJQDYQ" class="no-print col-xs-12 col-md-12 col-lg-12 thumbnail ">-->
            <!--              </div>-->
            <!--              <a href="https://share.here.com/r/19.28176,72.87399/19.22786,72.85573?m=d&t=traffic" target="_blank" class="no-print  col-xs-6 col-md-6 col-lg-1 btn btn-primary" type="button" style="margin: 5px;border-radius: 82px;width: 120px;border: 1px solid #000;">-->
            <!--                Navigate <span class="glyphicon glyphicon-new-window" style=""></span>-->
            <!--              </a>-->
            <!--              &lt;!&ndash;              <a href="./" class="no-print  col-xs-6 col-md-6 col-lg-1 btn btn-default" type="button" style="margin: 5px;border-radius: 82px;width: 120px;border: 1px solid #000;">&ndash;&gt;-->
            <!--              &lt;!&ndash;                Completed <span class="glyphicon glyphicon-ok-sign" style=""></span>&ndash;&gt;-->
            <!--              &lt;!&ndash;              </a>&ndash;&gt;-->
            <!--              &lt;!&ndash;              <a href="./" class="no-print  col-xs-6 col-md-6 col-lg-1 btn btn-danger" type="button" style="margin: 5px;border-radius: 82px;width: 120px;border: 1px solid #000;">&ndash;&gt;-->
            <!--              &lt;!&ndash;                Cancelled <span class="glyphicon glyphicon-remove-sign" style=""></span>&ndash;&gt;-->
            <!--              &lt;!&ndash;              </a>&ndash;&gt;-->
            <!--            </div>-->
            <!--          </li>-->

            <!--          <li class="timeline-inverted">-->
            <!--            <div class="timeline-badge"><i class="glyphicon glyphicon-check"></i></div>-->
            <!--            <div class="timeline-panel">-->
            <!--              <div class="timeline-heading">-->
            <!--                <h4 class="timeline-title">Mussum ipsum cacilds</h4>-->
            <!--                <p><small class="text-muted"><i class="glyphicon glyphicon-time"></i> 11 hours ago via Twitter</small></p>-->
            <!--              </div>-->
            <!--              <div class="timeline-body">-->
            <!--                <p>Mussum ipsum cacilds, vidis litro abertis. Consetis adipiscings elitis. Pra lá , depois divoltis porris, paradis. Paisis, filhis, espiritis santis. Mé faiz elementum girarzis, nisi eros vermeio, in elementis mé pra quem é amistosis quis leo. Manduma pindureta quium dia nois paga. Sapien in monti palavris qui num significa nadis i pareci latim. Interessantiss quisso pudia ce receita de bolis, mais bolis eu num gostis.</p>-->
            <!--              </div>-->
            <!--            </div>-->
            <!--          </li>-->

            <!--          <li class="timeline-inverted">-->
            <!--            <div class="timeline-badge warning"><i class="glyphicon glyphicon-credit-card"></i></div>-->
            <!--            <div class="timeline-panel">-->
            <!--              <div class="timeline-heading">-->
            <!--                <h4 class="timeline-title">Mussum ipsum cacilds</h4>-->
            <!--              </div>-->
            <!--              <div class="timeline-body">-->
            <!--                <p>Mussum ipsum cacilds, vidis litro abertis. Consetis adipiscings elitis. Pra lá , depois divoltis porris, paradis. Paisis, filhis, espiritis santis. Mé faiz elementum girarzis, nisi eros vermeio, in elementis mé pra quem é amistosis quis leo. Manduma pindureta quium dia nois paga. Sapien in monti palavris qui num significa nadis i pareci latim. Interessantiss quisso pudia ce receita de bolis, mais bolis eu num gostis.</p>-->
            <!--                <p>Suco de cevadiss, é um leite divinis, qui tem lupuliz, matis, aguis e fermentis. Interagi no mé, cursus quis, vehicula ac nisi. Aenean vel dui dui. Nullam leo erat, aliquet quis tempus a, posuere ut mi. Ut scelerisque neque et turpis posuere pulvinar pellentesque nibh ullamcorper. Pharetra in mattis molestie, volutpat elementum justo. Aenean ut ante turpis. Pellentesque laoreet mé vel lectus scelerisque interdum cursus velit auctor. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Etiam ac mauris lectus, non scelerisque augue. Aenean justo massa.</p>-->
            <!--              </div>-->
            <!--            </div>-->
            <!--          </li>-->
            <!--          <li>-->
            <!--            <div class="timeline-badge danger"><i class="glyphicon glyphicon-credit-card"></i></div>-->
            <!--            <div class="timeline-panel">-->
            <!--              <div class="timeline-heading">-->
            <!--                <h4 class="timeline-title">Mussum ipsum cacilds</h4>-->
            <!--              </div>-->
            <!--              <div class="timeline-body">-->
            <!--                <p>Mussum ipsum cacilds, vidis litro abertis. Consetis adipiscings elitis. Pra lá , depois divoltis porris, paradis. Paisis, filhis, espiritis santis. Mé faiz elementum girarzis, nisi eros vermeio, in elementis mé pra quem é amistosis quis leo. Manduma pindureta quium dia nois paga. Sapien in monti palavris qui num significa nadis i pareci latim. Interessantiss quisso pudia ce receita de bolis, mais bolis eu num gostis.</p>-->
            <!--              </div>-->
            <!--            </div>-->
            <!--          </li>-->
            <!--          <li class="timeline-inverted">-->
            <!--            <div class="timeline-panel">-->
            <!--              <div class="timeline-heading">-->
            <!--                <h4 class="timeline-title">Mussum ipsum cacilds</h4>-->
            <!--              </div>-->
            <!--              <div class="timeline-body">-->
            <!--                <p>Mussum ipsum cacilds, vidis litro abertis. Consetis adipiscings elitis. Pra lá , depois divoltis porris, paradis. Paisis, filhis, espiritis santis. Mé faiz elementum girarzis, nisi eros vermeio, in elementis mé pra quem é amistosis quis leo. Manduma pindureta quium dia nois paga. Sapien in monti palavris qui num significa nadis i pareci latim. Interessantiss quisso pudia ce receita de bolis, mais bolis eu num gostis.</p>-->
            <!--              </div>-->
            <!--            </div>-->
            <!--          </li>-->
            <!--          <li>-->
            <!--            <div class="timeline-badge info"><i class="glyphicon glyphicon-floppy-disk"></i></div>-->
            <!--            <div class="timeline-panel">-->
            <!--              <div class="timeline-heading">-->
            <!--                <h4 class="timeline-title">Mussum ipsum cacilds</h4>-->
            <!--              </div>-->
            <!--              <div class="timeline-body">-->
            <!--                <p>Mussum ipsum cacilds, vidis litro abertis. Consetis adipiscings elitis. Pra lá , depois divoltis porris, paradis. Paisis, filhis, espiritis santis. Mé faiz elementum girarzis, nisi eros vermeio, in elementis mé pra quem é amistosis quis leo. Manduma pindureta quium dia nois paga. Sapien in monti palavris qui num significa nadis i pareci latim. Interessantiss quisso pudia ce receita de bolis, mais bolis eu num gostis.</p>-->
            <!--                <hr>-->
            <!--                <div class="btn-group">-->
            <!--                  <button type="button" class="btn btn-primary btn-sm dropdown-toggle" data-toggle="dropdown">-->
            <!--                    <i class="glyphicon glyphicon-cog"></i> <span class="caret"></span>-->
            <!--                  </button>-->
            <!--                  <ul class="dropdown-menu" role="menu">-->
            <!--                    <li><a href="#">Action</a></li>-->
            <!--                    <li><a href="#">Another action</a></li>-->
            <!--                    <li><a href="#">Something else here</a></li>-->
            <!--                    <li class="divider"></li>-->
            <!--                    <li><a href="#">Separated link</a></li>-->
            <!--                  </ul>-->
            <!--                </div>-->
            <!--              </div>-->
            <!--            </div>-->
            <!--          </li>-->
            <!--          <li>-->
            <!--            <div class="timeline-panel">-->
            <!--              <div class="timeline-heading">-->
            <!--                <h4 class="timeline-title">Mussum ipsum cacilds</h4>-->
            <!--              </div>-->
            <!--              <div class="timeline-body">-->
            <!--                <p>Mussum ipsum cacilds, vidis litro abertis. Consetis adipiscings elitis. Pra lá , depois divoltis porris, paradis. Paisis, filhis, espiritis santis. Mé faiz elementum girarzis, nisi eros vermeio, in elementis mé pra quem é amistosis quis leo. Manduma pindureta quium dia nois paga. Sapien in monti palavris qui num significa nadis i pareci latim. Interessantiss quisso pudia ce receita de bolis, mais bolis eu num gostis.</p>-->
            <!--              </div>-->
            <!--            </div>-->
            <!--          </li>-->
            <!--          <li class="timeline-inverted">-->
            <!--            <div class="timeline-badge success"><i class="glyphicon glyphicon-thumbs-up"></i></div>-->
            <!--            <div class="timeline-panel">-->
            <!--              <div class="timeline-heading">-->
            <!--                <h4 class="timeline-title">Mussum ipsum cacilds</h4>-->
            <!--              </div>-->
            <!--              <div class="timeline-body">-->
            <!--                <p>Mussum ipsum cacilds, vidis litro abertis. Consetis adipiscings elitis. Pra lá , depois divoltis porris, paradis. Paisis, filhis, espiritis santis. Mé faiz elementum girarzis, nisi eros vermeio, in elementis mé pra quem é amistosis quis leo. Manduma pindureta quium dia nois paga. Sapien in monti palavris qui num significa nadis i pareci latim. Interessantiss quisso pudia ce receita de bolis, mais bolis eu num gostis.</p>-->
            <!--              </div>-->
            <!--            </div>-->
            <!--          </li>-->
            <!--        </ul>-->
          </div>


          <!--          <div class="container">-->
          <!--            <div class="">-->
          <!--              <div class="page-header">-->
          <!--                <h2 id="timeline" class="col-xs-12 col-md-12 col-lg-6">Trip Status - <span class="text-muted" id="tripStatus">COMPLETED</span></h2>-->
          <!--                <h2 class="col-xs-12 col-md-12 col-lg-6">Delivery By - <span class="text-muted" id="tripDeliveredBy">Madhav Verma</span></h2>-->
          <!--                <br><br><br>-->
          <!--              </div>-->


          <!--            </div>-->
        </div>

      </div>



    </div>

    <!--      <div style="display:none;" class="container">-->
    <!--        <div class="">-->

    <!--          <div class="row">-->

    <!--            <div class="col-xs-12 col-md-12 col-lg-12" style="height: 450px;">-->
    <!--              <div class="col-xs-12 col-md-12 col-lg-12" style="height: 525px; border:1px solid #CCC;">-->
    <!--                <div id="map"-->
    <!--                     style="height: 100%;width: 100%;position: absolute;top: 0px;left: 0px;-->
    <!--                 background-color: transparent;-->
    <!--                 box-shadow: 1px 1px 7px 4px #CCC;-->
    <!--                 border: 1px solid #CCC;-->
    <!--              "-->
    <!--                ></div>-->
    <!--              </div>-->
    <!--            </div>-->

    <!--          </div>-->

    <!--        </div>-->
    <!--      </div>-->
    <form>

    </form>
  </div>
</div>

</div>

<div class="container" role="main">

  <div class="row">

  </div>
</div> <!-- /container -->


<!-- Bootstrap core JavaScript
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<script src="https://code.jquery.com/jquery-1.12.4.min.js"
        integrity="sha384-nvAa0+6Qg9clwYCGGPpDQLVpLNn0fRaROjHqs13t4Ggj3Ez50XnGQqc/r8MhnRDZ"
        crossorigin="anonymous"></script>
<script>window.jQuery || document.write('<script src="./js/vendor/jquery-3.4.1.min.js"><\/script>')</script>
<script src="./js/bootstrap.min.js"></script>

<script src="./js/docs.min.js"></script>
<!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->


<script type="text/javascript" src="https://js.api.here.com/v3/3.0/mapsjs-core.js"></script>
<script type="text/javascript" src="https://js.api.here.com/v3/3.0/mapsjs-service.js"></script>
<script type="text/javascript" src="https://js.api.here.com/v3/3.0/mapsjs-ui.js"></script>
<script type="text/javascript" src="https://js.api.here.com/v3/3.0/mapsjs-mapevents.js"></script>

<!-- For Multi Range Taracking Sliders -->

<script type="text/javascript">

  function showPosition(position){
    console.log(position.coords.latitude + " " + position.coords.longitude);
    latitude = position.coords.latitude;
    longitude = position.coords.longitude;
  }

  //Get Geolocation
  function getLocation(){
    if (navigator.geolocation) {
      navigator.geolocation.getCurrentPosition(showPosition);
    } else {
      console.log("Geolocation is not supported");
      //Showing Default Map Location
      moveMap(map)
      //moveMyMapAndMarker(latitude, longitude);
    }
  }


  let latitude = 19.075983;
  let longitude = 72.877655;
  function moveMap(map){
    map.setCenter({lat: latitude, lng: longitude});
    map.setZoom(14);
  }

  // Instantiate a map and platform object:
  var platform = new H.service.Platform({
    'app_id': module_HEREDeveloperAccess.app_id,//localStorage.getItem("module_HEREDeveloperAccess").app_id,//module_HEREDeveloperAccess.app_id,
    'app_code': module_HEREDeveloperAccess.app_code,//localStorage.getItem("module_HEREDeveloperAccess").app_code//module_HEREDeveloperAccess.app_code//'IulCKZdfTxT9b5NPveT_og'
  });
  // Retrieve the target element for the map:
  var targetElement = document.getElementById('map');

  // Get the default map types from the platform object:
  var defaultLayers = platform.createDefaultLayers();

  // Instantiate the map:
  var map = new H.Map(
    document.getElementById('map'),
    defaultLayers.normal.map,
    {
      zoom: 13,
      center: { lat: latitude, lng: longitude }
    });

  //Add Drag Events
  // Enable the event system on the map instance:
  var mapEvents = new H.mapevents.MapEvents(map);

  const clicked = {onMapMarker: false, outsideMapMarker: false}

  // Add event listener:
  map.addEventListener('tap', function (evt){
    // Log 'tap' and 'mouse' events:
    console.log(evt)
    let target = evt.target

    console.log(evt.type, evt.currentPointer.type);
  });

  //Step 3: make the map interactive
  // MapEvents enables the event system
  // Behavior implements default interactions for pan/zoom (also on mobile touch environments)
  var behavior = new H.mapevents.Behavior(mapEvents);


  // Define a callback function to process the routing response:
  var onResult = function(result) {
    var route,
      routeShape,
      startPoint,
      endPoint,
      linestring;
    if(result.response.route) {
      // Pick the first route from the response:
      route = result.response.route[0];
      // Pick the route's shape:
      routeShape = route.shape;

      // Create a linestring to use as a point source for the route line
      linestring = new H.geo.LineString();

      // Push all the points in the shape into the linestring:
      routeShape.forEach(function(point) {
        var parts = point.split(',');
        linestring.pushLatLngAlt(parts[0], parts[1]);
      });

      // Retrieve the mapped positions of the requested waypoints:
      startPoint = route.waypoint[0].mappedPosition;
      endPoint = route.waypoint[1].mappedPosition;

      // Create a polyline to display the route:
      var routeLine = new H.map.Polyline(linestring, {
        style: { strokeColor: '#5698d3', lineWidth: 3 },
        arrows: { fillColor: 'black', frequency: 2, width: 2, length: 2 }
      });

      // Create a marker for the start point:
      var startMarker = new H.map.Marker({
        lat: startPoint.latitude,
        lng: startPoint.longitude
      });

      // Create a marker for the end point:
      var endMarker = new H.map.Marker({
        lat: endPoint.latitude,
        lng: endPoint.longitude
      });

      // Add the route polyline and the two markers to the map:
      map.addObjects([routeLine, startMarker, endMarker]);

      // Set the map's viewport to make the whole route visible:
      map.setViewBounds(routeLine.getBounds());
    }
  };

</script>

<script type="text/javascript">

  function getTrackingAccessToken (){
    return new Promise ((resolve, reject) => {

      let strTrackingAppEmail = module_HERETrackingAccount.trackingEmail;//"cpandit202@gmail.com"
      let strTrackingAppPassword = module_HERETrackingAccount.trackingPassword;//"Q2hpcmFnIzAwNw==" //btoa("passwordString")

      //Tracking Access Token URL - https://tracking.api.here.com/users/v2/login
      $.ajax({
        url: 'https://tracking.api.here.com/users/v2/login',
        dataType: 'json',
        type: 'post',
        contentType: 'application/json',
        data: JSON.stringify( {
          "email": ""+strTrackingAppEmail,
          "password": ""+atob(strTrackingAppPassword)
        } ),
        processData: false,
        success: function( data, textStatus, jQxhr ){
          //$('#response pre').html( JSON.stringify( data ) );
          console.log("data", data);
          resolve(data)
        },
        error: function( jqXhr, textStatus, errorThrown ){
          console.log( errorThrown );
          reject(jqXhr)
        }
      });
    });
  }

  /**
   * Will provide last tracking points
   * @param trackingDeviceId - Eg - HERE-970436b8-ab88-4c86-864e-70bdf7faa98c  - get this from getDevices Call - https://tracking.api.here.com/users/v2/devices?count=100
   * @param accessToken - let result = getTrackingAccessToken(); let accessToken = result.accessToken
   * @returns {Promise<any>}
   */
  function getTrackingData (trackingDeviceId, accessToken) {
    return new Promise((resolve, reject) => {
      //Retrieve Data from Tracking API - Eg https://tracking.api.here.com/traces/v2/HERE-970436b8-ab88-4c86-864e-70bdf7faa98c?count=1000  - [{"description":"","enabled":true,"key":"Content-Type","type":"text","value":"application/json"},{"description":"","enabled":true,"key":"Authorization","type":"text","value":"Bearer h1.QqQ1511VSx110Ql_bkhY4w.}
      $.ajax({
        url: 'https://tracking.api.here.com/traces/v2/'+trackingDeviceId,
        headers: {
          'Authorization': 'Bearer '+accessToken,
          'Content-Type': 'application/json'
        },
        dataType: 'json',
        type: 'get',
        contentType: 'application/json',
        processData: false,
        success: function( data, textStatus, jQxhr ){
          //$('#response pre').html( JSON.stringify( data ) );
          console.log("data", data);
          resolve( data )
        },
        error: function( jqXhr, textStatus, errorThrown ){
          console.log( jqXhr );
          reject(jqXhr)
        }
      });
    });
  }

  async function fetchTrackingData () {
    try {

      //Get access token - https://tracking.api.here.com/users/v2/login
      //Body - {  "email": "cpandit202@gmail.com", "password": "Chirag#007" } - atob(password) / btoa password
      //[{"key":"Content-Type","value":"application/json","description":"","type":"text","enabled":true}]

      let tokenData = await getTrackingAccessToken();
      let accessToken = await tokenData.accessToken;
      await console.log(accessToken);

      //Retrieve Data from Tracking API - Eg https://tracking.api.here.com/traces/v2/HERE-970436b8-ab88-4c86-864e-70bdf7faa98c?count=1000  - [{"description":"","enabled":true,"key":"Content-Type","type":"text","value":"application/json"},{"description":"","enabled":true,"key":"Authorization","type":"text","value":"Bearer h1.QqQ1511VSx110Ql_bkhY4w.}
      var url_string = location.href; //Current URL Parameter - eg - HERE-970436b8-ab88-4c86-864e-70bdf7faa98c
      var url = new URL(url_string);
      var trackingId = url.searchParams.get("trackingId");
      console.log("trackingId", trackingId);

      var routingId = url.searchParams.get("routingId");
      console.log("routingId", routingId);

      if (routingId && routingId != null) {
        //For fetching data - firebase.firestore().collection("routes").doc("Aqj1xqHMg1UY66kezJvu").get().then((doc) => {console.log(doc.data())})
        let routeDoc = await firebase.firestore().collection("routes").doc(routingId).get();//"Aqj1xqHMg1UY66kezJvu").get();//.then((doc) => {console.log(doc.data())})
        //await getTrackingData (trackingId, accessToken);
        await console.log("routeData: "+routeDoc.data())

        if (routeDoc.exists == false) {
          throw new Error ("No Route with that ID exists in DB");
        }

        let routeData = routeDoc.data();

        //Fetch Waypoints Data -
        let waypointsData = routeData.waypointsData;

        $("#tripId").html(""+routeData.tripName);
        $("#tripId").val(""+routeData.tripName);

        //Render output to screen5 - timelineList
        await renderTimeline(waypointsData)
      }
      else {
        throw new Error("Route ID (key: routingId) not present in URL Parmater");
      }

      if (trackingId && trackingId != null) {
        let trackingPoints = await getTrackingData (trackingId, accessToken);
        await console.log("trackingPoints: "+trackingPoints)

        if (trackingPoints && trackingPoints.data && trackingPoints.data.length === 0){
          throw new Error("No tracking points receieved for this user");
        }
        else {
          //loop through the trackingPoints.data array backwards and put data in routingParameters array as shown below
          // Create the parameters for the routing request:
          var routingParameters = {
            // The routing mode:
            'mode': 'fastest;car;traffic:disabled',
            // The start point of the route:
            // 'waypoint0': 'geo!50.1120423728813,8.68340740740811',
            // 'waypoint1': 'geo!52.5309916298853,13.3846220493377',
            // 'waypoint2': 'geo!52.5309916298853,13.3846220493377',
            // 'waypoint3': 'geo!52.5309916298853,13.3846220493377',
            // 'waypoint4' : 'geo!50.04925,8.57255',
            // 'waypoint5': 'geo!52.5309916298853,13.3846220493377',
            // The end point of the route:
            //'waypoint6' : 'geo!50.041050500736574,11.224351701659742',

            // To retrieve the shape of the route we choose the route
            // representation mode 'display'
            'representation': 'display'
          };
          let j = 0;

          for (let i = trackingPoints.data.length -1; i >= 0; i = i-10){
            let currentDataPoint = trackingPoints.data[i];
            console.log("currentDataPoint", currentDataPoint);
            let wayPointN = "waypoint"+ j
            let waypointGeoPosition = 'geo!'+currentDataPoint.position.lat+','+currentDataPoint.position.lng+'';
            if (currentDataPoint && currentDataPoint.position !== undefined && currentDataPoint.position.lat && currentDataPoint.position.lng){
              routingParameters["waypoint"+j] = waypointGeoPosition
            }
            j++;
            if (j > 175){
              break;
            }
          }

          //Add tracking points to map

          // Get an instance of the routing service:
          var router = platform.getRoutingService();

          // Call calculateRoute() with the routing parameters,
          // the callback and an error callback function (called if a
          // communication error occurs):
          router.calculateRoute(routingParameters, onResult,
            function(error) {
              console.log(error.message);
            });

        }

      }
      else {
        throw new Error("Tracking ID (key: trackingId) not present in URL Parmater");
      }

    }catch (error) {
      console.log(error)
    }
  }


  async function renderTimeline (waypointResponse) {
    let waypointsObject = {
      "results": [
        {
          "waypoints": [
            {
              "id": "1560687124003",
              "lat": 19.20879,
              "lng": 72.86434,
              "sequence": 0,
              "estimatedArrival": null,
              "estimatedDeparture": "2019-06-23T16:30:00Z",
              "fulfilledConstraints": []
            },
            {
              "id": "1560659419422",
              "lat": 19.1524,
              "lng": 72.85609,
              "sequence": 1,
              "estimatedArrival": "2019-06-23T16:50:08Z",
              "estimatedDeparture": "2019-06-25T15:45:00Z",
              "fulfilledConstraints": [
                "at:2019-06-25T15:30:00Z;st:900"
              ]
            },
            {
              "id": "1560691395144",
              "lat": 19.2814,
              "lng": 72.87371,
              "sequence": 2,
              "estimatedArrival": "2019-06-25T16:33:25Z",
              "estimatedDeparture": null,
              "fulfilledConstraints": [
                "at:2019-06-28T15:30:00Z;st:900"
              ]
            },
            {
              "id": "1560687124003",
              "lat": 19.20879,
              "lng": 72.86434,
              "sequence": 0,
              "estimatedArrival": null,
              "estimatedDeparture": "2019-06-23T16:30:00Z",
              "fulfilledConstraints": []
            },
            {
              "id": "1560659419422",
              "lat": 19.1524,
              "lng": 72.85609,
              "sequence": 1,
              "estimatedArrival": "2019-06-23T16:50:08Z",
              "estimatedDeparture": "2019-06-25T15:45:00Z",
              "fulfilledConstraints": [
                "at:2019-06-25T15:30:00Z;st:900"
              ]
            },
            {
              "id": "1560691395144",
              "lat": 19.2814,
              "lng": 72.87371,
              "sequence": 2,
              "estimatedArrival": "2019-06-25T16:33:25Z",
              "estimatedDeparture": null,
              "fulfilledConstraints": [
                "at:2019-06-28T15:30:00Z;st:900"
              ]
            },
            {
              "id": "1560687124003",
              "lat": 19.20879,
              "lng": 72.86434,
              "sequence": 0,
              "estimatedArrival": null,
              "estimatedDeparture": "2019-06-23T16:30:00Z",
              "fulfilledConstraints": []
            },
            {
              "id": "1560659419422",
              "lat": 19.1524,
              "lng": 72.85609,
              "sequence": 1,
              "estimatedArrival": "2019-06-23T16:50:08Z",
              "estimatedDeparture": "2019-06-25T15:45:00Z",
              "fulfilledConstraints": [
                "at:2019-06-25T15:30:00Z;st:900"
              ]
            },
            {
              "id": "1560691395144",
              "lat": 19.2814,
              "lng": 72.87371,
              "sequence": 2,
              "estimatedArrival": "2019-06-25T16:33:25Z",
              "estimatedDeparture": null,
              "fulfilledConstraints": [
                "at:2019-06-28T15:30:00Z;st:900"
              ]
            }
          ],
          "distance": "24219",
          "time": "173905",
          "interconnections": [
            {
              "fromWaypoint": "1560687124003",
              "toWaypoint": "1560659419422",
              "distance": 8374,
              "time": 1208,
              "rest": 0,
              "waiting": 167992
            },
            {
              "fromWaypoint": "1560659419422",
              "toWaypoint": "1560691395144",
              "distance": 15845,
              "time": 2905,
              "rest": 0,
              "waiting": 0
            }
          ],
          "description": "Targeted best time; with , improvement for traffic",
          "timeBreakdown": {
            "driving": 4113,
            "service": 1800,
            "rest": 0,
            "waiting": 167992
          }
        }
      ],
      "errors": [],
      "processingTimeDesc": "213ms",
      "responseCode": "200",
      "warnings": null,
      "requestId": null
    }

    waypointsObject = waypointResponse;

    let htmlContent = "";

    try{

      if (waypointsObject
        && waypointsObject.results
        && waypointsObject.results[0].waypoints.length >= 1) {

        let wayPointSequence = waypointsObject.results[0].waypoints;

        //Capture result in result div
        let totalDistance = waypointsObject.results[0].distance / 1000 ;//To KMs
        //let tripName = $("#tripName").val();

        let lastLat = latitude;
        let lastLon = longitude;

        $("#tripDistance").html(totalDistance+" km")


        for (let i = 0; i<wayPointSequence.length; i++) {

          console.log("Adding current waypoint sequence to timeline..")

          let timeLineClass = "timeline";
          if (i % 2 != 0) {
            timeLineClass = "timeline-inverted"
          }

          let tripStopClass = "success";
          if (i % 2 == 0) {
            tripStopClass = "warning"
          }
          if (i % 3 == 0) {
            tripStopClass = "danger"
          }

          let currentWaypointSequence = wayPointSequence[i];
          let orderNumber = currentWaypointSequence.id;

          //Get Current Order Number

          //order;//Current Order from firestore
          let doc = await firebase.firestore().collection("orders")
            //.where("createdBy", "==", "" + firebase.auth().currentUser.uid)
            .where("orderNumber", "==", orderNumber).get()

          let orderData = {};
          await doc.forEach(async (orderRecord) => {
            console.log("orderData : ", orderRecord.data())
            orderData = orderRecord.data();
          });

          let completed = "COMPLETED";
          htmlContent += '\n' +
            '          <li class="'+timeLineClass+'">\n' +
            '            <div class="timeline-badge '+tripStopClass+'"><i class="glyphicon glyphicon-map-marker"></i></div>\n' +
            '            <div class="timeline-panel">\n' +
            '              <div class="timeline-heading">\n' +
            '                <h3 class="timeline-title">Order '+orderNumber+'</h3>\n' +
            '                <p><small class="text-muted"><i class="glyphicon glyphicon-time"></i> ETA : '+orderData.eta+'</small></p>\n' +
            '              </div>\n' +
            '              <div class="timeline-body">\n' +
            '                <p>\n' +
            '                  <strong>TripStop# :</strong> '+i+' <br/>\n' +
            '                  <!--  <strong>Customer :</strong> Chirag Pandit-->\n' +
            '                  <strong>Customer :</strong> '+orderData.customerName +' <br/>\n' +
            '                  <strong>Address :</strong> '+orderData.custAddress +' \n' +
            '                  <!--                  Customer : Chirag Pandit-->\n' +
            '                </p><br/>\n' +
            '                <img src="https://image.maps.api.here.com/mia/1.6/mapview?c='+orderData.position[0]+'%2C'+orderData.position[1]+'&z=14&w=250&h=120&f=1&app_id='+module_HEREDeveloperAccess.app_id+'&app_code='+module_HEREDeveloperAccess.app_code+'" class="no-print col-xs-12 col-md-12 col-lg-12 thumbnail ">\n' +
            '              </div>\n' +
            '              <a href="https://share.here.com/r/'+lastLat+','+lastLon+'/'+orderData.position[0]+','+orderData.position[1]+'?m=d&t=traffic" target="_blank" class="no-print  col-xs-6 col-md-6 col-lg-1 btn btn-primary" type="button" style="margin: 5px;border-radius: 82px;width: 120px;border: 1px solid #000;">\n' +
            '                Navigate <span class="glyphicon glyphicon-new-window" style=""></span>\n' +
            '              </a>\n' +
            '                            <a onclick="completeOrder('+orderNumber+', \''+completed+'\')" class="no-print  col-xs-6 col-md-6 col-lg-1 btn btn-default" type="button" style="margin: 5px;border-radius: 82px;width: 120px;border: 1px solid #000;">\n' +
            '                              Completed <span class="glyphicon glyphicon-ok-sign" style=""></span>\n' +
            '                            </a>\n' +
            '              <!--              <a href="./" class="no-print  col-xs-6 col-md-6 col-lg-1 btn btn-danger" type="button" style="margin: 5px;border-radius: 82px;width: 120px;border: 1px solid #000;">-->\n' +
            '              <!--                Cancelled <span class="glyphicon glyphicon-remove-sign" style=""></span>-->\n' +
            '              <!--              </a>-->\n' +
            '            </div>\n' +
            '          </li>';

          lastLat = orderData.position[0];
          lastLon = orderData.position[1];
        }

      }
      else {
        console.log("No waypoints detected..")
      }
    } catch (e) {
      console.log("Unable to render trips: ",e)
    }

    $("#renderTimelineList").html(htmlContent)

    // Fadeout location loader and show timeline
    $("#screen4").fadeOut("150", function () {

      $("#renderTimeline").show()
      $("#screen5").fadeIn(300);
    })

  }

  async function completeOrder (orderNumber, status){
    try {

      //
      // let doc = await firebase.firestore().collection("orders").where("orderNumber", "==", ""+orderNumber).get()
      await firebase.firestore().collection("orders").where("orderNumber", "==", ""+orderNumber)
        .get()
        .then(function(querySnapshot) {
          querySnapshot.forEach(function(doc) {
            console.log(doc.id, " => ", doc.data());
            // Build doc ref from doc.id
            firebase.firestore().collection("orders").doc(doc.id).update({status: status});
            $('#myModal').modal({show : true})
          });
        }).catch(function (error) {
          console.log("Unable to mark order "+status+": ",error)
        })
      //console.log(doc.ref.update({status: "COMPLETED"}))


    }catch (error) {
      console.log("Unable to mark order "+status+": ",error)
    }
  }

  $(document).ready(function (){

    //Set initial map location to browser's location
    getLocation();

    //Get Device TrackingID from URL Parameter -
    let trackingData = fetchTrackingData();

  });

</script>

<!-- Firebase App (the core Firebase SDK) is always required and must be listed first -->
<script src="https://www.gstatic.com/firebasejs/6.1.1/firebase-app.js"></script>

<!-- Add Firebase products that you want to use -->
<script src="https://www.gstatic.com/firebasejs/6.1.1/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/6.1.1/firebase-firestore.js"></script>


<!--Load Access Keys -->
<script src="./accessKeys.js"></script>

<script type="text/javascript">

  // Your web app's Firebase configuration
  //var firebaseConfig = localStorage.getItem("module_firebaseConfig");//module_firebaseConfig;

  // Initialize Firebase
  firebase.initializeApp(module_firebaseConfig);

  // Get a reference to the database service
  //var database = firebase.database();

  var db = firebase.firestore();


  firebase.auth().onAuthStateChanged(function(user) {
    if (user) {
      // User is signed in.
      console.log("Loaded ", user)
      //$("#emailId").text(userDetails.email)

      //Fetch all orders belonging to that user id - auth.currentUser.uid
      let currentUserId = firebase.auth().currentUser.uid; //W0snQdSu0hdDUmTH85BlJKzkPTr2
      console.log("currentUserId: ",currentUserId)
      //getOrders(currentUserId)
      //getDeliveryAssociates(currentUserId)
      //fetchTrackingData()
    } else {
      // No user is signed in.
      window.location.href = "/";
    }
  });

  //
  // $('#exampleModal').on('show.bs.modal', function (event) {
  //   var button = $(event.relatedTarget) // Button that triggered the modal
  //   var recipient = button.data('whatever') // Extract info from data-* attributes
  //   // If necessary, you could initiate an AJAX request here (and then do the updating in a callback).
  //   // Update the modal's content. We'll use jQuery here, but you could use a data binding library or other methods instead.
  //   var modal = $(this)
  //   modal.find('.modal-title').text('New message to ' + recipient)
  //   modal.find('.modal-body input').val(recipient)
  // })


</script>

<svg xmlns="http://www.w3.org/2000/svg" width="1140" height="500" viewBox="0 0 1140 500" preserveAspectRatio="none"
     style="display: none; visibility: hidden; position: absolute; top: -100%; left: -100%;">
  <defs>
    <style type="text/css"></style>
  </defs>
  <text x="0" y="57" style="font-weight:bold;font-size:57pt;font-family:Arial, Helvetica, Open Sans, sans-serif">

  </text>
</svg>


<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="exampleModalLabel"><span id="myMessage">Order Status Changed</span></h4>
      </div>
      <!--                    <div class="modal-body">-->
      <!--                      <form>-->
      <!--                        <div class="form-group">-->
      <!--                          <label for="recipient-name" class="control-label">Recipient:</label>-->
      <!--                          <input type="text" class="form-control" id="recipient-name">-->
      <!--                        </div>-->
      <!--                        <div class="form-group">-->
      <!--                          <label for="message-text" class="control-label">Message:</label>-->
      <!--                          <textarea class="form-control" id="message-text"></textarea>-->
      <!--                        </div>-->
      <!--                      </form>-->
      <!--                    </div>-->
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal" onclick="">Close</button>
        <!--                      <button type="button" class="btn btn-default">Add an another order</button>-->
<!--        <a href="" type="button" class="btn btn-primary">View all orders</a>-->
      </div>
    </div>
  </div>
</div>

</body>
</html>

